<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Forgot Password</title>
    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon" />
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap"
      rel="stylesheet"
    />

    <!-- Vendor CSS Files -->
    <link
      href="assets/vendor/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="assets/vendor/bootstrap-icons/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link href="assets/vendor/aos/aos.css" rel="stylesheet" />
    <link
      href="assets/vendor/glightbox/css/glightbox.min.css"
      rel="stylesheet"
    />
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />

    <!-- Main CSS File -->
    <link href="assets/css/main.css" rel="stylesheet" />
    <script src="assets/js/constant.js"></script>
    <!-- Add Axios CDN -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      .btn-light-green {
        background-color: #bcd531 !important;
        color: white !important;
        font-size: small;
        padding: 5px 40px;
        border-radius: 40px;
      }
      .card {
        border: none;
        border-top-left-radius: 20px;
        border-top-right-radius: 20px;
      }
      .form-control {
        padding: 10px 20px;
        color: grey !important;
      }
      .form-control::placeholder {
        color: grey !important;
      }
      .privacy-text {
        color: grey;
        font-size: small;
        margin-bottom: 20px;
        padding-top: 20px;
      }
    </style>
  </head>
  <body class="">
    <header id="header" class="header">
      <div class="container-fluid top-header">
        <div class="container-xl">
          <div class="row align-items-center">
            <div class="col-md-8 d-flex align-items-center">
              <nav id="navmenu" class="navmenu">
                <ul>
                  <li class="">
                    <img
                      src="assets/img/location-icon.png"
                      alt="Location Icon"
                      class="icon-right"
                    />
                    <span class="top-header-text"
                      >Address, Fox 99 Roving St, Big City PKU</span
                    >
                  </li>
                  <li class="">
                    <img
                      src="assets/img/email-icon.png"
                      alt="Email Icon"
                      class="icon-right"
                    />
                    <span class="top-header-text">hello@awesomesite.com</span>
                  </li>
                  <li class="">
                    <img
                      src="assets/img/phone-icon.png"
                      alt="Phone Icon"
                      class="icon-right"
                    />
                    <span class="top-header-text">+123-234-1234</span>
                  </li>
                </ul>
              </nav>
            </div>
            <div class="col-md-4 text-end">
              <a href="auth.html">Register</a>
              <a href="auth.html">Login</a>
              <a href="my-account.html">My Account</a>
            </div>
          </div>
        </div>
      </div>
      <div
        class="container-fluid container-xl position-relative d-flex align-items-center"
      >
        <a href="index.html" class="logo d-flex align-items-center me-auto">
          <img src="assets/img/logo.png" alt="Logo Image" />
        </a>

        <nav id="navmenu" class="navmenu">
          <ul>
            <li><a href="index.html" class="active">HOMEPAGE</a></li>
            <li><a href="about.html">ABOUT US</a></li>
            <li><a href="menu.html">MENU</a></li>
            <li><a href="meal-packages.html">MEAL PACKAGES</a></li>
            <li><a href="wishlist.html">WISHLIST</a></li>
            <li><a href="cart.html">MY CART</a></li>
            <li><a href="privacy-and-policy.html">PRIVACY & POLICY</a></li>
            <li><a href="contact.html">CONTACT US</a></li>
            <!-- <li class="dropdown"><a href="#"><span>Dropdown</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
                <ul>
                  <li><a href="#">Dropdown 1</a></li>
                  <li class="dropdown"><a href="#"><span>Deep Dropdown</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
                    <ul>
                      <li><a href="#">Deep Dropdown 1</a></li>
                      <li><a href="#">Deep Dropdown 2</a></li>
                      <li><a href="#">Deep Dropdown 3</a></li>
                      <li><a href="#">Deep Dropdown 4</a></li>
                      <li><a href="#">Deep Dropdown 5</a></li>
                    </ul>
                  </li>
                  <li><a href="#">Dropdown 2</a></li>
                  <li><a href="#">Dropdown 3</a></li>
                  <li><a href="#">Dropdown 4</a></li>
                </ul>
              </li> -->
          </ul>
          <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
        </nav>

        <!-- <a class="btn-getstarted" href="index.html#about">Get Started</a> -->
      </div>
    </header>
    <div class="container mt-5 mb-5">
      <div class="row justify-content-center">
        <div class="col-md-8">
          <div class="card">
            <form id="otp-form">
              <p class="privacy-text">
                LLost your password? Please enter your username or email
                address. You will recieve <br />
                a link to create a new password via email.
              </p>
              <div class="mb-3">
                <input
                  type="email"
                  class="form-control"
                  id="register-email"
                  placeholder="Username or email"
                />
              </div>
              <button type="submit" class="btn btn-light-green">
                Continue
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Select the form
        const otpForm = document.getElementById("otp-form");

        // Ensure the form element is found
        if (!otpForm) {
          console.error("OTP form not found");
          return;
        }

        // Add event listener for form submission
        otpForm.addEventListener("submit", function (e) {
          e.preventDefault(); // Prevent default form submission

          // Get the email number value from the form
          const email = document.getElementById("register-email").value;

          // Basic validation for email
          if (!email || !/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(email)) {
            showToast("Please enter a valid email address", "error");
            return;
          }

          // API URL (Using global apiBaseUrl)
          const apiUrl = `${apiBaseUrl}users/send-otp`;

          // API request body
          const data = {
            email: email,
          };

          // Send OTP request using Axios
          axios
            .post(apiUrl, data)
            .then((response) => {
              console.log(response.data); // Handle success

              // Show success toast
              showToast("OTP sent successfully!", "success");

              // Redirect to the next page after 2 seconds
              setTimeout(() => {
                window.location.href = "forget-password-code.html";
              }, 2000);
            })
            .catch((error) => {
              console.error("There was an error!", error);

              // Show error toast
              if (error.response && error.response.data.message) {
                showToast(
                  `Failed to send OTP: ${error.response.data.message}`,
                  "error"
                );
              } else {
                showToast("Failed to send OTP. Please try again.", "error");
              }
            });
        });

        // Function to show toast messages
        function showToast(message, type) {
          const toastContainer = document.getElementById("toast-container");
          const toast = document.createElement("div");
          toast.className = `toast ${type}`;
          toast.innerText = message;
          toastContainer.appendChild(toast);

          // Show toast animation
          setTimeout(() => {
            toast.classList.add("show");
          }, 60);

          // Remove toast after 4 seconds
          setTimeout(() => {
            toast.classList.remove("show");
            toastContainer.removeChild(toast);
          }, 4000);
        }
      });
    </script>
    <!-- /Subscribe Footer Section -->
    <!-- Footer will be loaded here -->
    <div id="footer-placeholder"></div>

    <script>
      // Load footer.html into the placeholder div
      fetch("footer.html")
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("footer-placeholder").innerHTML = data;
        })
        .catch((error) => console.error("Error loading footer:", error));
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
